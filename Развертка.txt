-1) –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
dotnet publish -c Release -o ./publish

1) –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ ssh –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@185.103.254.12 (ssh <name>@<adress>
–í–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å

2) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dotnet –ø–∞–∫–µ—Ç–æ–≤

sudo dnf install -y https://packages.microsoft.com/config/rhel/8/prod.repo
//sudo dnf install -y dotnet-sdk-8.0.11 - –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

sudo dnf install -y dotnet-runtime-7.0.11 - —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

sudo dnf install dotnet-sdk-9.0

*!->*sudo dnf install -y dotnet-sdk-8.0

3) –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ scp -r C:\projects\Super-Bot\publish root@159.255.34.79:/superbot

4) –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ nginx

5) –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDb

–î–æ–±–∞–≤—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π MongoDB
MongoDB –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö CentOS/AlmaLinux, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π MongoDB.

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è MongoDB:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo vim /etc/yum.repos.d/mongodb-org.repo
–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –¥–ª—è –≤–µ—Ä—Å–∏–∏ MongoDB 6.0 (–ø–æ—Å–ª–µ–¥–Ω—è—è –Ω–∞ –º–æ–º–µ–Ω—Ç 2025 –≥–æ–¥–∞):

ini
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
[mongodb-org-6.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/6.0/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-6.0.asc


sudo dnf install -y mongodb-org

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–∫–ª—é—á–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É MongoDB:
//sudo systemctl stop mongod
sudo systemctl enable mongod
sudo systemctl start mongod --replSet rs0 --bind_ip localhost

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã:
sudo systemctl status mongod

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–Ω–≥–æ–î–ë
mongosh

rs.initiate()

rs.status()


cd /superbot
dotnet SuperBot.WebApi.dll


–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
//////// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è aspdotnet nohup dotnet SuperBot.WebApi.dll --urls http://0.0.0.0:5000 > output.log 2>&1 &
///////////cat output.log - –ø—Ä–æ—Å–º–æ—Ç—Ä –µ–≥–æ –ª–æ–≥–æ–≤

sudo nano /etc/systemd/system/superbot.service
–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª:

ini
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
[Unit]
Description=SuperBot Web API
After=network.target

[Service]
WorkingDirectory=/superbot
ExecStart=/usr/bin/dotnet /superbot/SuperBot.WebApi.dll --urls http://0.0.0.0:5000
Restart=always
User=root
Environment=ASPNETCORE_ENVIRONMENT=Production
Environment=DOTNET_PRINT_TELEMETRY_MESSAGE=false

[Install]
WantedBy=multi-user.target

# –í–∫–ª—é—á–∞–µ–º
sudo systemctl enable superbot.service
# –ó–∞–ø—É—Å–∫–∞–µ–º
sudo systemctl start superbot.service
# –ü—Ä–æ–≤–µ—Ä—è–µ–º
sudo systemctl status superbot.service
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
sudo systemctl restart superbot.service
# –ï—Å–ª–∏ –µ—â–µ –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω –∫–æ–Ω—Ñ–∏–≥ –¥–µ–º–æ–Ω–∞ –°–Ω–∞—á–∞–ª–∞ —ç—Ç–æ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
sudo systemctl daemon-reload

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–≤–µ–∫—Å-–ø—Ä–æ–∫—Å–∏

sudo yum install -y nginx
sudo systemctl enable nginx
sudo systemctl start nginx
# –ü—Ä–æ–≤–µ—Ä—è–µ–º
sudo systemctl status nginx


sudo nano /etc/nginx/conf.d/superbot.conf
server {
    listen 80;
    server_name 159.255.34.79;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}


sudo nginx -t
sudo systemctl restart nginx

üîπ –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–∞ 80 –≤ Firewall
–ß—Ç–æ–±—ã –≤–∞—à —Å–µ—Ä–≤–µ—Ä –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ, –æ—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo firewall-cmd --add-service=http --permanent
sudo firewall-cmd --reload


–í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏:
sudo vim /etc/mongod.conf

–ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é replication (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –µ—ë, –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç) –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

replication:
  replSetName: rs0
net:
  bindIp: localhost // –ú–ë –ª–∏—à–Ω–µ–µ
–ï—Å–ª–∏ —Å–µ–∫—Ü–∏—è net —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏—Ç–µ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É bindIp: localhost.


–ß—Ç–æ–±—ã –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–ª–æ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–ª–æ—Å—å –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–µ—Å—Å–∏–∏ SSH, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ systemd –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª—É–∂–±—ã.

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –¥–ª—è –≤–∞—à–µ–π —Å–ª—É–∂–±—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, /etc/systemd/system/myapp.service:

sudo nano /etc/systemd/system/myapp.service
–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:

[Unit]
Description=My ASP.NET Core App
After=network.target

[Service]
WorkingDirectory=/var/www/myapp
ExecStart=/usr/bin/dotnet /var/www/myapp/MyApp.dll
Restart=always
RestartSec=10
KillSignal=SIGINT
SyslogIdentifier=dotnet-myapp
User=youruser
Environment=ASPNETCORE_ENVIRONMENT=Production
Environment=DOTNET_PRINT_TELEMETRY_MESSAGE=false

[Install]
WantedBy=multi-user.target
–ó–∞–º–µ–Ω–∏—Ç–µ youruser –Ω–∞ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.






–§—Ä–æ–Ω—Ç–µ–Ω–¥)

1) –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ scp -r C:\projects\Super-Bot\tale-gameshop\dist root@159.255.34.79:/superbot_frontend

sudo vi /etc/nginx/conf.d/superbot.conf
server {
    listen 80;
    server_name 159.255.34.79;

    # –ö–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    root /superbot_frontend;

    index index.html;

    location / {
        try_files $uri /index.html;  # –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ SPA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
    }

    # –ü—Ä–æ–∫—Å–∏ –¥–ª—è backend API
    location /api/ {
        proxy_pass http://localhost:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}



sudo firewall-cmd --add-port=5000/tcp --permanent
sudo firewall-cmd --reload
sudo firewall-cmd --list-ports

Keycloak)

//1) sudo yum install -y docker
//sudo systemctl enable --now docker
//docker network create keycloak-network

–õ–æ–≥–∏–Ω: admin
–ü–∞—Ä–æ–ª—å: #DG%hWZqIe

-1)

curl -fsSL https://github.com/keycloak/keycloak/releases/latest/download/keycloak-22.0.5.tar.gz -o keycloak.tar.gz
tar -xvzf keycloak.tar.gz
mv keycloak-22.0.5 /opt/keycloak) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

sudo yum install -y postgresql-server postgresql-contrib
sudo postgresql-setup --initdb
sudo systemctl enable --now postgresql


sudo -u postgres psql

CREATE DATABASE keycloak;
CREATE USER keycloak_user WITH PASSWORD '#DG%hWZqIe';
ALTER ROLE keycloak_user SET client_encoding TO 'utf8';
ALTER ROLE keycloak_user SET default_transaction_isolation TO 'read committed';
ALTER ROLE keycloak_user SET timezone TO 'UTC';
GRANT ALL PRIVILEGES ON DATABASE keycloak TO keycloak_user;
\q

0)

curl -fsSL https://github.com/keycloak/keycloak/releases/download/26.1.0/keycloak-26.1.0.tar.gz -o keycloak.tar.gz
tar -xvzf keycloak.tar.gz
mv keycloak-26.1.0 /opt/keycloak


curl -L https://jdbc.postgresql.org/download/postgresql-42.5.1.jar -o /opt/keycloak/providers/postgresql.jar


1) sudo nano /opt/keycloak/conf/keycloak.conf

# Production-—Ä–µ–∂–∏–º
hostname=127.0.0.1
http-enabled=true
https-port=8088
proxy=none

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
db=postgres
db-url=jdbc:postgresql://localhost:5432/keycloak
db-username=keycloak_user
db-password=#DG%hWZqIe

# Production
spi-truststore-file=/opt/keycloak/conf/keystore.jks
spi-truststore-password=changeit




1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenJDK
Keycloak —Ç—Ä–µ–±—É–µ—Ç Java 17 –∏–ª–∏ –Ω–æ–≤–µ–µ. –£—Å—Ç–∞–Ω–æ–≤–∏–º:

sudo yum install -y java-17-openjdk
–ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é:
java -version



cd /opt/keycloak
bin/kc.sh build



4. –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ Keycloak —á–µ—Ä–µ–∑ systemd
–°–æ–∑–¥–∞—ë–º —Å–µ—Ä–≤–∏—Å:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo nano /etc/systemd/system/keycloak.service
–î–æ–±–∞–≤–ª—è–µ–º:

ini
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
[Unit]
Description=Keycloak Server
After=network.target postgresql.service

[Service]
User=root
ExecStart=/opt/keycloak/bin/kc.sh start --optimized
Restart=always
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
–°–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º:


sudo systemctl daemon-reload
sudo systemctl enable keycloak
sudo systemctl start keycloak
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å:

sudo systemctl status keycloak






–ü—Ä–∏–Ω—è—Ç–∏–µ PostgreSQL TCP/IP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo nano /var/lib/pgsql/data/postgresql.conf
–ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä listen_addresses –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –Ω–µ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ localhost –∏–ª–∏ *:

ini
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
listen_addresses = 'localhost'
–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞: (–Ø –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é –µ–≥–æ)

listen_addresses = '*'
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–æ—Å—Ç—É–ø–∞:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo nano /var/lib/pgsql/data/pg_hba.conf
–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:

css
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
host    all             all             127.0.0.1/32            trust
–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo systemctl restart postgresql


////////////////////////////////////
0) –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ª–∏–Ω—É–∫—Å–∞ (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ)

[root@tale-shop ~]# ps aux | grep dnf
root        1326  0.0  0.1 221940  1196 pts/0    R+   12:58   0:00 grep --color=auto dnf

 sudo kill -9 1312

[root@tale-shop ~]# dnf list installed

cd - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ

ls - –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–ø–∫–µ

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–∫–∏ AlmaLinux

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –≤–∫–ª—é—á–µ–Ω—ã –≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo dnf repolist
–ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç EPEL (Extra Packages for Enterprise Linux), —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏—Ö:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo dnf install epel-release -y
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–±–Ω–æ–≤–∏—Ç–µ –∫–µ—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo dnf makecache
–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å sshguard:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
sudo dnf install sshguard

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∞–π–ª–∞ –ø–æ–¥–∫–∞—á–∫–∏ –≤ 2 –≥–∏–≥–∞

[root@vm ~]# sudo fallocate -l 2G /swapfile
[root@vm ~]# sudo chmod 600 /swapfile
[root@vm ~]# sudo mkswap /swapfile
Setting up swapspace version 1, size = 2 GiB (2147479552 bytes)
no label, UUID=6b2baf8d-f04a-4118-9045-74a57f1902b7
[root@vm ~]# sudo swapon /swapfile
[root@vm ~]# sudo swapon --show
NAME      TYPE SIZE USED PRIO
/swapfile file   2G   0B   -2

echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–∫–∏

[root@vm ~]# free -h
               total        used        free      shared  buff/cache   available
Mem:           757Mi       325Mi       459Mi        15Mi        73Mi       431Mi
Swap:             0B          0B          0B
[root@vm ~]# top


SSHGuard
SSHGuard ‚Äî –ª—ë–≥–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∞—Ç–∞–∫ –º–µ—Ç–æ–¥–æ–º –ø–æ–¥–±–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –¥–µ–º–æ–Ω–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, SSH, Exim –∏ —Ç.–¥.).

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSHGuard:


sudo dnf install sshguard
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ FirewallD –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

–í–∫–ª—é—á–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ sshguard –≤ iptables:
sudo firewall-cmd --permanent --new-service=sshguard
sudo firewall-cmd --permanent --add-service=sshguard
sudo firewall-cmd --reload
–ó–∞–ø—É—Å—Ç–∏—Ç–µ SSHGuard:

sudo systemctl enable --now sshguard
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

sudo systemctl status sshguard
SSHGuard –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç IP-–∞–¥—Ä–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–≤–µ—Ä—à–∞—é—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.


–û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç mongodb –≤ —Ñ–∞–µ—Ä–≤–æ–ª–µ
[root@vm superbot]# sudo firewall-cmd --add-port=27017/tcp --permanent
success
[root@vm superbot]# sudo firewall-cmd --reload
success

–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ
rm -f /path/to/directory/*


. curl ‚Äî –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
–ï—Å–ª–∏ –≤–∞—à —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ HTTP (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 80, 8080 –∏ —Ç. –¥.), –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É curl –¥–ª—è —Ç–µ—Å—Ç–∞:

–ü—Ä–∏–º–µ—Ä:
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
curl http://localhost:8080